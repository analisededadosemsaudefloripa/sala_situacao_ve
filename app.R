# Sala de Situação da Vigilância Epidemiológica de Florianópolis
#
#######################################################################
#Bibliotecas
#######################################################################
library(shiny)


#######################################################################
#Bases de dados
#######################################################################
#######################################################################
##Localização e abrangëncia dos CSs
#######################################################################
source("dados_localizacao_abrangencia_cs.R")


#######################################################################
##Estatísticas Vitais e Demografia
#######################################################################
#######################################################################
###Nascimentos
#######################################################################


#######################################################################
###Óbitos
#######################################################################
#######################################################################
##Geral - Série Temporal
#######################################################################
source("dados_sim.R", encoding = "UTF-8")
source("modulo_cid_local.R", encoding = "UTF-8")
source("modulo_serie_temporal.R", encoding = "UTF-8")
#######################################################################
##Óbitos gerais - Associações
#######################################################################
#source("sim_06_16.R", encoding = "UTF-8")
#source("modulo_cid_local.R", encoding = "UTF-8")
source("modulo_regressao.R", encoding = "UTF-8")
#######################################################################
##Óbitos materno infantis por semana
#######################################################################


#######################################################################
##Óbitos materno infantis por semana
#######################################################################


#######################################################################
##Agravos de Notificação
#######################################################################
#######################################################################
###HIV
#######################################################################


#######################################################################
###Sífilis
#######################################################################
source("dados_sifilis.R", encoding = "UTF-8")
source("modulo_mapa_tab_dens_serie.R", encoding = "UTF-8")
#######################################################################
###Doenças de Notificação Hídrico-alimentar
#######################################################################



#######################################################################
##Agravos Estratégicos
#######################################################################
#######################################################################
###COAP
#######################################################################


#######################################################################
#User Interface
#######################################################################
# Define UI for application that draws a histogram
ui <- shinyUI(navbarPage(shinythemes::themeSelector(),
  title = "Vigilância Epidemiológica de Florianópolis",
#######################################################################
##Estatísticas Vitais e Demografia
#######################################################################
  navbarMenu("Estatísticas Vitais e Demografia",
#######################################################################
###Nascimentos
#######################################################################
    tabPanel("Nascimentos"),
#######################################################################
###Óbitos
#######################################################################
#######################################################################
##Óbitos gerais - Séries Temporais
#######################################################################
        tabPanel("Óbitos gerais - Séries Temporais",
                        serie_temporal_UI(id = "serie_obito",
                                          input_dados = cid_local_Input(id = "cid_serie_obito", banco = sim))
        ),
#######################################################################
##Óbitos gerais - Associações
#######################################################################
        tabPanel("Óbitos gerais - Associações",
                        regressao_UI(id = "associacao_obito",
                                     input_dados = cid_local_Input(id = "cid_associacao_obito", banco = sim),
                                     banco = sim)
        ),
#######################################################################
###Demografia
#######################################################################
    tabPanel("Demografia")),
#######################################################################
##Agravos de Notificação
#######################################################################
  navbarMenu("Agravos de Notificação",
#######################################################################
###HIV
#######################################################################
    tabPanel("HIV"),
#######################################################################
###Tuberculose
#######################################################################
    tabPanel("Tuberculose"),
#######################################################################
###Sífilis
#######################################################################
    tabPanel(title = "Sífilis - Série Histórica",
             mapa_tab_dens_serie_UI(id = "sifilis", 
                                    banco_geral = dados_sifilis, 
                                    banco_cs = banco_sifilis_cs)),
#######################################################################
###Hepatites virais
#######################################################################
    tabPanel("Hepatites Virais"),
#######################################################################
###Tuberculose
#######################################################################
    tabPanel("Tuberculose"),
#######################################################################
###Doencas transmitidas pelo Aedes
#######################################################################
    tabPanel("Doencas transmitidas pelo Aedes"),
#######################################################################
###Leishmaniose Viceral
#######################################################################
    tabPanel("Leishmaniose Viceral"),
#######################################################################
###Doenças de Veiculação Hídrico-alimentar
#######################################################################
    tabPanel("Doenças de Veiculação Hídrico-alimentar")),
#######################################################################
##Agravos Estratégicos
#######################################################################
  navbarMenu("Agravos Estratégicos",
#######################################################################
###Trânsito
#######################################################################
    tabPanel("Trânsito"),
#######################################################################
###Inicadores COAP
#######################################################################
    tabPanel("Inicadores COAP")
  )
 )
)
#############################################################################
#Server
#############################################################################
server <- function(input, output) {
#######################################################################
##Estatísticas Vitais e Demografia
#######################################################################
  
#######################################################################
###Nascimentos
#######################################################################
  
#######################################################################
###Óbitos
#######################################################################
#######################################################################
##Geral - Série Temporal
#######################################################################
        banco_preparado_serie <- callModule(module = cid_local, 
                             id = "cid_serie_obito", 
                             banco = sim)
        callModule(module = serie_temporal, 
                   id = "serie_obito", 
                   banco_preparado = banco_preparado_serie)
#######################################################################
##Óbitos gerais - Associações
#######################################################################
        banco_preparado_associacao <- callModule(module = cid_local, 
                             id = "cid_associacao_obito", 
                             banco = sim)
        callModule(module = regressao, 
                   id = "associacao_obito",
                   banco_preparado = banco_preparado_associacao)

#######################################################################
###Demografia
#######################################################################
   

#######################################################################
##Agravos de Notificação
#######################################################################
#######################################################################
###HIV
#######################################################################


#######################################################################
###Tuberculose
#######################################################################

 
#######################################################################
###Sífilis
#######################################################################
        callModule(module = mapa_tab_dens_serie, 
                   id = "sifilis", 
                   banco_geral = dados_sifilis, 
                   banco_sifilis_cs, 
                   banco_sifilis_florianopolis)

#######################################################################
###Hepatites virais
#######################################################################

 
#######################################################################
###Tuberculose
#######################################################################

 
#######################################################################
###Doencas transmitidas pelo Aedes
#######################################################################


#######################################################################
###Leishmaniose Viceral
#######################################################################


#######################################################################
###Doenças de Veiculação Hídrico-alimentar
#######################################################################


#######################################################################
##Agravos Estratégicos
#######################################################################


             
#######################################################################
###Trânsito
#######################################################################


#######################################################################
###Inicadores COAP
#######################################################################

       
    
}



# Run the application 
shinyApp(ui = ui, server = server)

